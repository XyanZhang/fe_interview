# 判断一个元素是否在可视区中

## 运用

+ 图片懒加载
+ 列表无限滚动
+ 计算广告的元素的曝光情况
+ 可点击链接的预加载

## 实现方式

+ offsetTop, scrollTop
+ getBoundingClientRect
+ Intersection Observer

### offsetTop, 元素的上外边框至包含元素的上内边框之前的像素距离

clientWidth: 元素内容区宽度加上左右内边距宽度：clientWidth = content + padding

clientHeight: 元素内容区高度加上上下内边距高度：clientWidth = content + padding

scrollHeight 和 scrollHeight 主要用于确定元素内容的实际大小

scrollLeft 和  scrollTop 属性既可以用来确定元素当前滚动的状态，也可以设置元素的滚动位置。垂直滚动 scrollTop > 0 , 水平滚动scrollLeft >  0

将scrollLeft 和  scrollTop 设置为0，可以重置元素的滚动位置

```js
function isInviewPortOfOne(el) {
  // viewPortHeight 兼容所有浏览器写法
  const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  const offsetTop = el.offsetTop;
  const scrollTop = document.documentElement.scrollTop;
  const top = offsetTop - scrollTop;
  return top <= viewPortHeight
}
```

## getBoundingClientRect

返回值是一个DOMRect 对象，拥有 left，top，right，bottom，x，y，width， height 属性

当页面发生滚动时候，top和left属性值都会随之改变

如果一个元素在视窗之内，那么他一定满足下面四个条件

+ top >= 0
+ left >= 0
+ bottom <= 视窗高度 window.innerHeight || document.documentElement.clientHeight
+ right <= 视窗宽度 window.innerWidth || document.documentElement.clientWidth
