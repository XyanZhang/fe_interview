# Class & Hooks

## Class 作为组件是否合适？

React 组件之间不会互相继承，所以我们不需要使用面向对象的继承模式。我们推荐使用组合而不是继承来实现代码的重用。

所有UI都是状态驱动，很少会在外部去调用一个类实例（即组件）的方法。

## 函数组组件初期局限

函数组件没有实例，所以没有生命周期，没有实例方法，没有状态，没有上下文，没有 refs；

但是 函数相比类更适合去描述 State => View 这样一个映射关系

## hooks 诞生

为了解决函数组件的局限性，hooks 诞生了，它可以让函数组件拥有类组件的能力，同时又保持了函数组件的简洁性。

hooks机制：把一个外部的数据绑定到函数的执行。当数据变化时，函数会重新执行。这样的话，任何影响到UI展现的外部数据，都可以通过这个机制绑定到React的函数组件

在React中，所有的hooks最终结果都是导致UI变化

## hooks的好处

- 代码更简洁，简化逻辑复用
- 对比高阶组件，代码量更少，在复用时不需要再去包裹一层高阶组件处理数据
- 对比render props，代码量更少，不需要再去处理props的传递
- 关注分离：一个业务逻辑的代码尽可能聚合在一块，而不是分散在不同的生命周期函数中（class组件）

## hooks的局限

- 只能用作数据逻辑的重用 （通过 render props 和高阶组件可以实现UI逻辑的重用）

## hooks 优秀实践

尽量将相关的逻辑做成独立的hooks，然后再函数中使用这些hooks，通过参数传递和返回值让hooks之间完成交互

拆分逻辑目的不一定为了重用，也可以是为了业务逻辑的隔离。这种情况下，没有必要将hooks写在单独的文件中，可以直接写在逻辑业务文件中，这样更方便阅读和理解